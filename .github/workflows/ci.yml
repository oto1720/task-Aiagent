name: CI

# ã„ã¤å®Ÿè¡Œã™ã‚‹ã‹ï¼Ÿ
on:
  push:
    branches: [ main ]  # mainãƒ–ãƒ©ãƒ³ãƒã«pushã—ãŸæ™‚ã ã‘
  pull_request:
    branches: [ main ]

jobs:
  # ã‚¸ãƒ§ãƒ–åï¼ˆã‚ã‹ã‚Šã‚„ã™ã„åå‰ï¼‰
  check-my-code:
    runs-on: ubuntu-latest
    timeout-minutes: 10  # 10åˆ†ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç„¡æ–™æ ç¯€ç´„ï¼‰
    
    steps:
    # ã‚¹ãƒ†ãƒƒãƒ—1: ã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    - name: ğŸ“¥ ã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      uses: actions/checkout@v4
    
    # ã‚¹ãƒ†ãƒƒãƒ—2: Flutterç’°å¢ƒã‚’æº–å‚™
    - name: ğŸ› ï¸ Flutteræº–å‚™
      uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.35.3'
        cache: true  # æ¬¡å›ã‹ã‚‰æ—©ããªã‚‹
        
    # ã‚¹ãƒ†ãƒƒãƒ—3: å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    - name: ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å–å¾—
      run: flutter pub get
      
    # ã‚¹ãƒ†ãƒƒãƒ—4: ã‚³ãƒ¼ãƒ‰ã«å•é¡ŒãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯
    - name: ğŸ” ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
      run: flutter analyze
      
    # ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
    - name: ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
      run: flutter test
      
    # ã‚¹ãƒ†ãƒƒãƒ—6: æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    - name: âœ… å®Œäº†
      run: |
        echo "ğŸ‰ ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
        echo "ğŸ“± ã‚¢ãƒ—ãƒªã«å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“"